<html>
<body>
<p id="readThisFirst">
This is a program for playing the displayed knitting pattern. Click the pattern and then button PLAY. You can adjust the pattern reading by choosing speed, language(not working yet, default playing)</br>
</p>

<p id="players_elements" style="">
<br>
Voice:
<select id="sound"> 
  	<option value= 'OFF'>OFF</option> 
  	<option value= 'ON'>ON</option> 
  	
</select> 
</br>
<select id="speed"> 
  	<option value= 'speed1'>Speed 1</option> 
  	<option value= 'speed2'>Speed 2</option> 
  	<option value= 'speed3'>Speed 3</option> 
  	<option value= 'speed4'>Speed 4</option> 
</select> 
<select id="language"> 
  	<option value= 'English'>English</option> 
  	<option value= 'Spanish'>Spanish</option> 
  	<option value= 'Russian'>Russian</option> 
  
</select>

<audio id="a050">
  <source src="assets/knit.mp3" type="audio/mpeg">
</audio>
<audio id="b050">
  <source src="assets/purl.mp3" type="audio/mpeg">
</audio>
<audio id="b051">
  <source src="assets/knit.mp3" type="audio/mpeg">
</audio>
<audio id="a051">
  <source src="assets/purl.mp3" type="audio/mpeg">
</audio>
<audio id="a052">
  <source src="assets/pass1knitwise.mp3" type="audio/mpeg">
</audio>
<audio id="b052">
  <source src="assets/purl2tog.mp3" type="audio/mpeg">
</audio>

<audio id="a053">
  <source src="assets/knit2tog.mp3" type="audio/mpeg">
</audio>

<audio id="b053">
  <source src="assets/purl2tog.mp3" type="audio/mpeg">
</audio>

<audio id="a054">
  <source src="assets/yarnover.mp3" type="audio/mpeg">
</audio>

<audio id="b054">
  <source src="assets/yarnover.mp3" type="audio/mpeg">
</audio>
<audio id="a056">
  <source src="assets/knit.mp3" type="audio/mpeg">
</audio>
<audio id="b056">
  <source src="assets/knit.mp3" type="audio/mpeg">
</audio>

</br>
<input  onclick="start1()" type="button" id="mixBut" value="PLAY"  ></input>
<input  onclick="repeatRow()" type="button" id="repeatBut" value="REPEAT ROW" style='visibility:'></input>
<input  onclick="goNextRow()" type="button" id="goNextRowBut" value="GO NEXT ROW" style='visibility:'></input>

</br>
<textarea readonly id="description" rows="3" cols="20" style="font-size: 22pt;align-content: center;">

</textarea>
</br>
</p>
<g id=gr"" x=0 y=150>
<svg width="350" height="200">
  <rect id = "player_rectangle" width="325" height="140" x=5 y=5 rx="10" ry="10" style="fill: #566573 ; stroke-width:10; stroke: #212F3C; " />


<svg height="50" width="400">
  <text id="fig5" x="40" y="45" fill="lightgrey"></text>
</svg>
<svg height="50" width="400">
  <text id="fig4" x="90" y="45" fill="lightgrey"></text>
</svg>

<svg height="50" width="400">
  <text id="fig3" x="155" y="30" fill="white"></text>
</svg>

<svg height="50" width="400">
  <text id="fig2" x="215" y="45" fill="lightgrey"></text>
</svg>
<svg height="50" width="400">
  <text id="fig1" x="265" y="45" fill="lightgrey"></text>
</svg>

	<svg  id="Cell5" x=30 y=50 width="50" height="50" viewBox="0 0 100 100" scale="" transform=""  >
	<rect  id="cell5_rect" cx="0" cy="0" width="100" height="100" stroke="black" stroke-width="4" fill="lightgray"/>
	
		<path id="path5"   d="" stroke="black" stroke-width="3" fill="none" />
	
	</svg>

	<svg  id="Cell4" x=80 y=50 width="50" height="50" viewBox="0 0 100 100" scale="" transform="">
		<rect  id="cell4_rect" cx="0" cy="0" width="100" height="100" stroke="black" stroke-width="4" fill="lightgray"/>
		<path id="path4"   d="" stroke="black" stroke-width="3" fill="none" />
	</svg>

	<svg id="Cell3" x=130 y=35 width="75" height="75" viewBox="0 0 100 100" scale="" transform="">
		<rect id="cell3_rect" cx="200" cy="200" width="100" height="100" stroke="black" stroke-width="4" fill="white"/>
		<path id="path3"   d="" 
	stroke="black" stroke-width="3" fill="none" />
  	</svg>

	<svg  id="Cell2" x=205 y=50 width="50" height="50" viewBox="0 0 100 100" scale="" transform="" >
		<rect  id="cell2_rect" cx="0" cy="0" width="100" height="100" stroke="black" stroke-width="4" fill="lightgray"/>
		<path id="path2"   d="" stroke="black" stroke-width="3" fill="none" />
  	</svg>

	<svg id="Cell1" x=255 y=50 width="50" height="50" viewBox="0 0 100 100" scale="" transform="" >
		<rect  id="cell1_rect" cx="0" cy="0" width="100" height="100" stroke="black" stroke-width="4" fill="lightgray"/>
		<path id="path1"   d="" stroke="black" stroke-width="3" fill="none" />
  	</svg>


<svg height="200" width="400">
  <text id="fig_d5" x="40" y="115" fill="black"></text>
</svg>
<svg height="200" width="400">
  <text id="fig_d4" x="90" y="115" fill="black"></text>
</svg>

<svg height="200" width="400">
  <text id="fig_d3" x="155" y="125" fill="black"></text>
</svg>

<svg height="200" width="400">
  <text id="fig_d2" x="215" y="115" fill="black"></text>
</svg>
<svg height="200" width="400">
  <text id="fig_d1" x="265" y="115" fill="black"></text>
</svg>
<svg height="200" width="400">
  <text id="row_num_left" x="10" y="80" fill="yellow"></text>
</svg>

<svg height="200" width="400">
  <text id="row_num_right" x="305" y="80" fill="yellow"></text>
</svg>

<svg height="200" width="400">
  <text id="RS_WS" x="265" y="130" fill="yellow"></text>
</svg>


</g>



<style>
table, th, td {
  border: 1px solid black;
}
table {
	border-collapse: collapse;
	
}

.activeCell {
  background-color: coral;
  color: black;
  border: 3px solid black;
}
.nonActiveCell {
  background-color: white;
  color: black;
  border: 1px solid black;
}


</style>
</head>
<body>

<div class=”scroll-table”>
</div>
</p>

<div id="myDynamicTable"></div>
<table style="";
border: 1px solid black;

</table>
<script>
var curr_count=0;
var cell_id="";
var myVar=1;
var sideRSWS=document.getElementById("RS_WS");

//function repeatRow should reassign curr_count to 1 or last one depends on WS or RS
function repeatRow(){
	curr_count= cols;
	
	console.log("repeatRow called: curr_count=",curr_count);
	start1();
}


// function goNextRow should assign new values for row number count and 
// curr_count should be 1 or last one depends on RS or WS is next row
function goNextRow(){
	curr_count= 1;
	
	console.log("goNextRowB called: curr_count=",curr_count);
	start1();
}



function start1(){
	console.log("Start1: curr_count=",curr_count,"the id ",cell_id);
//	console.log(sideRSWS_d,curr_count_d,row_num, cells_arr);
//	console.log('side not deteremened',curr_count,"row_num not deteremened", cells_arr);


	var repeatBut = document.getElementById("repeatBut");
	repeatBut.style.visibility="hidden";

	var goNextRowBut = document.getElementById("goNextRowBut");
	goNextRowBut.style.visibility="hidden";

	var mixBut = document.getElementById("mixBut");
	
	mixBut.value = "START";
	mixBut.addEventListener("click", Start);

	function Start(){
//    console.log("Started");
    		mixBut.removeEventListener("click", Start);
   		mixBut.addEventListener("click", Stop);
    		mixBut.value = "STOP";
		playIt();
	
	}//Start

	function Stop(){
    		console.log("Stopped");
	var repeatBut = document.getElementById("repeatBut");
	repeatBut.style.visibility="visible";

	var goNextRowBut = document.getElementById("goNextRowBut");
	goNextRowBut.style.visibility="visible";
    		mixBut.removeEventListener("click", Stop);
    		mixBut.addEventListener("click", Start);
    		mixBut.value = "START";
		console.log(myVar);
		if (myVar!=-1){
		clearInterval(myVar);
		}
		myVar=-1;


//		stopIt();
	}//Stop

	function stopIt(){
		console.log(myVar);
		if (myVar!=-1){
		clearInterval(myVar);}
		myVar=-1;

	}//StopIt

	function myMove1(){
		
		console.log("myMove1 call : myVar="+myVar+" curr_count="+curr_count,sideRSWS);
		cell_id_arr=cell_id.split("-",2);
//		console.log("ppplayer "+curr_id_arr);
		row_id=parseInt(cell_id_arr[0]);
		col_id=cell_id_arr[1];
		console.log("player "+row_id+"="+col_id);
		col_id_int=parseInt(col_id);
		col_id_int_1=col_id_int-1;
		

		new_id=""+row_id+"-"+col_id_int;
//wrong args-fix here
		if (sideRSWS=='RS'){
			curr_count=curr_count+1;			
			
		}else{
			curr_count=curr_count-1;
		}

		display5(sideRSWS,curr_count,rows-row_id-1, knitelem_arr[rows-				row_id-1]);


//		player();
//  		document.getElementById(cols-curr_count).style.background="pink";

  		
		

//		document.getElementById(old_id_).style.border = "1px solid black";
//		document.getElementById(cell_id).style.border = "7px solid #0000FF";

		console.log("curr_count=", curr_count);
// 1 condition to stop-- end of the row
		if ((curr_count==0)||(curr_count==1)||(curr_count==cols)) {			
  			Stop();
		  	return;
		};


// 2 condition to stop-- pressed button Stop
		if(myVar == -1) { 


			Stop();
			return; }
	
//	if ((curr_pos==-1)||(curr_pos==line.length)||(curr_count==0)||(curr_count==(line.length+1))||(curr_pos==0))
//		{ 
//		console.log("0 or end");
//  		Stop();
//		  return;};

// start to prepare array for display


	}//myMove1
	function player(){
		console.log("!!! ",curr_id);
		curr_id_arr=curr_id.split("-",2);
//		console.log("ppplayer "+curr_id_arr);
		row_id=curr_id_arr[0];
		col_id=curr_id_arr[1];
//		console.log("player "+row_id+"="+col_id);
		col_id_int=parseInt(col_id);
		col_id_int_1=col_id_int-1;
		if (col_id_int_1==0){
		// Activate buttons and stop
		document.getElementById("stop_buttons").style.display = "block";
		 Stop();}

		//col_id=col_id_int+"";
		curr_id_=row_id+"x"+col_id_int_1;
		curr_id=row_id+"-"+col_id_int_1;
		document.getElementById(old_id_).style.border = "1px solid black";
		document.getElementById(curr_id_).style.border = "7px solid #0000FF";
		old_id_=curr_id_;
		

	}//function player


	function playIt()
	{
	stopIt();
		var col_c=0;
		var speed_ = document.getElementById("speed").value;
		var sp=0;
	switch (speed_)

	{	case "speed1":
		sp=1000;
		break;
		case "speed2":
		sp=2000;
		break;
		case "speed3":
		sp=3000;
		break;
		case "speed4":
		sp=4000;
		break;

	}

	

var delayInMilliseconds = Number(sp);


myVar=setInterval(myMove1,delayInMilliseconds);




}//playIt()



}//Start1




//arrays of knitting elements

var knitelem0=["RS","knit","knitelem0.png","a050","","knit.mp3"];

var knitelem0w=["WS","purl","knitelem_ws.png","b050","M 10 50 l 80 0","purl.mp3"];

var knitelem1=["RS","purl","knitelem1.png","a051","M 10 50 l 80 0","purl.mp3"];

var knitelem1w=["WS","knit","knitelem1_ws.png","b051","M 50 20 v 60 0","knit.mp3"];

var knitelem2=["RS","SKP or SSK: slip 1 knitwise,pass slipped stitch over","knitelem2.png","a052","M 15 15 l 65 65 M 50 50 l -35 30","pass1knitwise.mp3"];

var knitelem2w=["WS","P2tog or SSP:purl 2 together or slip -1 knitwise- 2times return stitches then p2tog","knitelem2_ws.png","b052","M 15 15 l 65 65 M 50 50 l -35 30","purl2tog.mp3"];

var knitelem3=["RS","k2tog","knitelem3.png","a053","M 85 15 l -65 65 M 50 50 l 35 30","knit2tog.mp3"];

var knitelem3w=["WS","p2tog","knitelem3_ws.png","b053","M 85 15 l -65 65 M 50 50 l 35 30","purl2tog.mp3"];

var knitelem4=["RS","Yo: yarn over","knitelem4.png","a054","M 50, 50 m -37.5, 0 a 37.5,37.5 0 1,0 75,0 a 37.5,37.5 0 1,0 -75,0","yarnover.mp3"];

var knitelem4w=["WS","Yo: yarn over","knitelem4_ws.png","b054","M 50, 50 m -37.5, 0 a 37.5,37.5 0 1,0 75,0 a 37.5,37.5 0 1,0 -75,0","yarnover.mp3"];



var knitelem6=["RS","k:knit","knitelem6.png","a056","knit.mp3"];

var knitelem6w=["WS","k: knit","knitelem6_ws.png","b056","knit.mp3"];

var curr_ke=["","","","","",""];








</script>
<script>


// Rows 
rows=24;
//Columns
cols=19;
var strids="a054;a050;a050;a050;a052;a050;a050;a050;a051;a050;a050;a050;a053;a050;a050;a050;a054;a051;a051;a050;b054;a050;a050;a050;b052;a050;a050;b051;a050;a050;b053;a050;a050;a050;b054;a050;b051;b051;a050;a050;a054;a050;a050;a050;a052;a050;a051;a050;a053;a050;a050;a050;a054;a050;a050;a051;a051;a050;a050;a050;b054;a050;a050;a050;b052;b051;b053;a050;a050;a050;b054;a050;a050;a050;b051;b051;a054;a050;a050;a050;a052;a050;a050;a050;a051;a050;a050;a050;a053;a050;a050;a050;a054;a051;a051;a050;b054;a050;a050;a050;b052;a050;a050;b051;a050;a050;b053;a050;a050;a050;b054;a050;b051;b051;a050;a050;a054;a050;a050;a050;a052;a050;a051;a050;a053;a050;a050;a050;a054;a050;a050;a051;a051;a050;a050;a050;b054;a050;a050;a050;b052;b051;b053;a050;a050;a050;b054;a050;a050;a050;b051;b051;a054;a050;a050;a050;a052;a050;a050;a050;a051;a050;a050;a050;a053;a050;a050;a050;a054;a051;a051;a050;b054;a050;a050;a050;b052;a050;a050;b051;a050;a050;b053;a050;a050;a050;b054;a050;b051;b051;a050;a050;a054;a050;a050;a050;a052;a050;a051;a050;a053;a050;a050;a050;a054;a050;a050;a051;a051;a050;a050;a050;b054;a050;a050;a050;b052;b051;b053;a050;a050;a050;b054;a050;a050;a050;b051;b051;a050;a050;a050;a050;a050;a053;a050;a054;a050;a054;a050;a052;a050;a050;a050;a050;a050;a051;a051;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;b051;b051;a050;a050;a050;a050;a053;a050;a054;a053;a054;a050;a054;a050;a052;a050;a050;a050;a050;a051;a051;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;b051;b051;a050;a050;a050;a053;a050;a054;a053;a054;a050;a054;a052;a054;a050;a052;a050;a050;a050;a051;a051;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;b051;b051;a050;a050;a053;a050;a054;a053;a054;a053;a054;a050;a054;a052;a054;a050;a052;a050;a050;a051;a051;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;b051;b051;a050;a053;a050;a054;a053;a054;a053;a054;a050;a054;a052;a054;a052;a054;a050;a052;a050;a051;a051;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;b051;b051;a053;a050;a054;a053;a054;a053;a054;a053;a054;a050;a054;a052;a054;a052;a054;a050;a052;a051;a051;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;a050;b051;b051;";



strids0="";



paty=rows;
patx=cols;


var line=[];

for (var i=0;i<paty;i++)
{
	for (var j=0;j<patx;j++)
	{
	if ((strids.length)>0){
			strid=strids.slice(0,5);
			if ((strid=="a050;")&&(i%2!=0))
				 strid="b050;";

				strids=strids.slice(5);
				strids0=strids0+strid;
		//	console.log(strid+" j="+j+"i="+i);
				
		}

	}

}
strids=strids0;

//var knitelem_arr=[];
//knitelem_arr[row][col] = knitelem0w;

var knitelem_arr=[];


for(var row=0; row <(paty+1); row++)
{ knitelem_arr[row] = []; 
	for(var col = 0; col < (patx+1); col++) {
	if (row%2==0)  {	
		 knitelem_arr[row][col] = knitelem0w; }
	else
		knitelem_arr[row][col] = knitelem0;} 
}


for(var i=0;i<paty;i++){

	for(var j=0;j<patx;j++){

		// here need to make switch (){} for substrings
		if ((strids.length)>0){
			strid=strids.slice(0,4);

			switch(strid){
				case "a050":
				knitelem_arr[i][j] = knitelem0;
				break;

				case "b050":
					knitelem_arr[i][j] = knitelem0w;
				break;
				case "a051":
				knitelem_arr[i][j] = knitelem1;
				break;

				case "b051":
					knitelem_arr[i][j] = knitelem1w;
				break;
				case "a052":
				knitelem_arr[i][j] = knitelem2;
				break;

				case "b052":
					knitelem_arr[i][j] = knitelem2w;
				break;
				case "a053":
				knitelem_arr[i][j] = knitelem3;
				break;

				case "b053":
					knitelem_arr[i][j] = knitelem3w;
				break;

				case "a054":
				knitelem_arr[i][j] = knitelem4;
				break;

				case "b054":
					knitelem_arr[i][j] = knitelem4w;
				break;

				case "a056":
				knitelem_arr[i][j] = knitelem6;
				break;

				case "b056":
					knitelem_arr[i][j] = knitelem6w;
				break;



			}
			strids=strids.slice(5);
//console.log("i="+i+", j="+j+" "+knitelem_arr[i][j][3]);
	//	console.log(strid+" j="+j+"i="+i);
		}
		
	}
line=knitelem_arr[0][0];
//curr_count=0;
//console.log("line initialised here ",line);
}


function playIt(curr_id){
// Rows 
rows=24;
//Columns
cols=19;

if ((curr_id==0)||( typeof curr_id === 'undefined')) {
	curr_id="23-18";
	}
	console.log("playIt");
	myVar=setInterval(player, 1000);
	

	function player(){
		console.log("!!! ",curr_id);
		curr_id_arr=curr_id.split("-",2);
		console.log("ppplayer "+curr_id_arr);
		row_id=curr_id_arr[0];
		col_id=curr_id_arr[1];
//		console.log("player "+row_id+"="+col_id);
		col_id_int=parseInt(col_id);
		col_id_int_1=col_id_int-1;
		if (col_id_int_1==0){
		// Activate buttons and stop
		document.getElementById("stop_buttons").style.display = "block";
		 Stop();}

		//col_id=col_id_int+"";
		curr_id_=row_id+"x"+col_id_int_1;
		curr_id=row_id+"-"+col_id_int_1;
		document.getElementById(old_id_).style.border = "1px solid black";
		document.getElementById(curr_id_).style.border = "7px solid #0000FF";
		old_id_=curr_id_;
		

	}//function player


}

function returnD(r,c){
	dd=knitelem_arr[rows-r-1][cols-c-1][4]
	return dd;

}
</script>


<script>

function display5(sideRSWS_d,curr_count_d,row_num, cells_arr){


console.log("function display5 called with sideRSWS_d",sideRSWS_d,"curr_count_d", curr_count_d,"row_num", row_num, "cells_arr:",cells_arr);

document.getElementById("RS_WS").innerHTML=sideRSWS_d;
document.getElementById("cell1_rect").style.fill = "lightgrey";
document.getElementById("cell2_rect").style.fill = "lightgrey";
document.getElementById("cell3_rect").style.fill = "white";
document.getElementById("cell4_rect").style.fill = "lightgrey";
document.getElementById("cell5_rect").style.fill = "lightgrey";

if (document.getElementById("sound").value!="OFF"){
	let voice_on=document.getElementById(cells_arr[curr_count_d-1][5]);
console.log("VOICE_ON=", voice_on);
	voice_on.play();
};

var a_cell=document.getElementById(""+(rows-row_num-1)+"-"+(cols-curr_count_d));

if (a_cell!=null){
document.getElementById(""+(rows-row_num-1)+"-"+(cols-curr_count_d)).style.background="orange";
a_cell.setAttribute("width","60");
a_cell.setAttribute("height","40");

}


console.log(""+(row_num-1)+"-"+(curr_count_d));
if (sideRSWS_d=='WS'){ 
	document.getElementById("player_rectangle").style.fill = "#9FE2BF";
	if (curr_count_d==2)
	{
	document.getElementById("path1").setAttribute('d',cells_arr[curr_count_d+1][4]);
	document.getElementById("path2").setAttribute('d',cells_arr[curr_count_d][4]);
	document.getElementById("path3").setAttribute('d',cells_arr[curr_count_d-1][4]);
	document.getElementById("path4").setAttribute('d',cells_arr[curr_count_d-2][4]);
	document.getElementById("path5").setAttribute('d','');

	document.getElementById("cell5_rect").style.fill = "blue";
	}

	if (curr_count_d==1){
	document.getElementById("path1").setAttribute('d',cells_arr[curr_count_d+1][4]);
	document.getElementById("path2").setAttribute('d',cells_arr[curr_count_d][4]);
	document.getElementById("path3").setAttribute('d',cells_arr[curr_count_d-1][4]);
	document.getElementById("path4").setAttribute('d','');
	document.getElementById("path5").setAttribute('d','');

	document.getElementById("cell5_rect").style.fill = "blue";
	document.getElementById("cell4_rect").style.fill = "blue";
	}

	if (curr_count_d==cols){
//

	document.getElementById("path1").setAttribute('d',"");
	document.getElementById("path2").setAttribute('d',cells_arr[curr_count_d][4]);
	document.getElementById("path3").setAttribute('d',cells_arr[curr_count_d-1][4]);
	document.getElementById("path4").setAttribute('d',cells_arr[curr_count_d-2][4]);
	document.getElementById("path5").setAttribute('d',cells_arr[curr_count_d-3][4]);
	document.getElementById("cell1_rect").style.fill = "blue";
	document.getElementById("cell2_rect").style.fill = "blue";
	}
	if (curr_count_d==cols-1){
//
console.log("curr_count=", curr_count);
	document.getElementById("path1").setAttribute('d',"");
document.getElementById("path2").setAttribute('d',cells_arr[curr_count_d][4]);
	
	document.getElementById("path3").setAttribute('d',cells_arr[curr_count_d-1][4]);
	document.getElementById("path4").setAttribute('d',cells_arr[curr_count_d-2][4]);
	document.getElementById("path5").setAttribute('d',cells_arr[curr_count_d-3][4]);
	document.getElementById("cell1_rect").style.fill = "blue";
	
	}	


if ((curr_count_d<(cols-1))&&(curr_count_d>2))
{
	document.getElementById("path1").setAttribute('d',cells_arr[curr_count_d+1][4]);
	document.getElementById("path2").setAttribute('d',cells_arr[curr_count_d][4]);
	document.getElementById("path3").setAttribute('d',cells_arr[curr_count_d-1][4]);
	document.getElementById("path4").setAttribute('d',cells_arr[curr_count_d-2][4]);
	document.getElementById("path5").setAttribute('d',cells_arr[curr_count_d-3][4]);
	document.getElementById("description").innerHTML=cells_arr[curr_count_d-1][1];
	document.getElementById("cell5_rect").style.fill = "lightgrey";
document.getElementById("cell4_rect").style.fill = "lightgrey";
document.getElementById("cell3_rect").style.fill = "white";
document.getElementById("cell2_rect").style.fill = "lightgrey";
document.getElementById("cell1_rect").style.fill = "lightgrey";
	
	}//if


	document.getElementById("row_num_left").style.fill = "black";
	document.getElementById("row_num_right").style.fill = "black";

	document.getElementById('fig5').innerHTML = ""+(curr_count_d-2);
	document.getElementById('fig4').innerHTML = ""+(curr_count_d-1);
	document.getElementById('fig3').innerHTML = ""+(curr_count_d);
	document.getElementById('fig2').innerHTML = ""+(curr_count_d+1);
	document.getElementById('fig1').innerHTML = ""+(curr_count_d+2);

	document.getElementById("fig_d5").innerHTML = ""+(curr_count_d-2);
	document.getElementById("fig_d4").innerHTML = ""+(curr_count_d-1);
	document.getElementById("fig_d3").innerHTML = ""+(curr_count_d);
	document.getElementById("fig_d2").innerHTML = ""+(curr_count_d+1);
	document.getElementById("fig_d1").innerHTML = ""+(curr_count_d+2);


}



if (sideRSWS_d=='RS'){
	document.getElementById("RS_WS").innerHTML=sideRSWS_d+""+(row_num+1);


	if (curr_count_d==2)
	{
	document.getElementById("path5").setAttribute('d',cells_arr[curr_count_d+1][4]);
	document.getElementById("path4").setAttribute('d',cells_arr[curr_count_d][4]);
	document.getElementById("path3").setAttribute('d',cells_arr[curr_count_d-1][4]);
	document.getElementById("path2").setAttribute('d',cells_arr[curr_count_d-2][4]);
	document.getElementById("path1").setAttribute('d','');

	document.getElementById("cell1_rect").style.fill = "blue";
	}

	if (curr_count_d==1){
	document.getElementById("path5").setAttribute('d',cells_arr[curr_count_d+1][4]);
	document.getElementById("path4").setAttribute('d',cells_arr[curr_count_d][4]);
	document.getElementById("path3").setAttribute('d',cells_arr[curr_count_d-1][4]);
	document.getElementById("path2").setAttribute('d','');
	document.getElementById("path1").setAttribute('d','');

	document.getElementById("cell1_rect").style.fill = "blue";
	document.getElementById("cell2_rect").style.fill = "blue";
	}

	if (curr_count_d==cols){
//

	document.getElementById("path5").setAttribute('d',"");
	document.getElementById("path4").setAttribute('d',"");
	document.getElementById("path3").setAttribute('d',cells_arr[curr_count_d-1][4]);
	document.getElementById("path2").setAttribute('d',cells_arr[curr_count_d-2][4]);
	document.getElementById("path1").setAttribute('d',cells_arr[curr_count_d-3][4]);
	document.getElementById("cell5_rect").style.fill = "blue";
	document.getElementById("cell4_rect").style.fill = "blue";
	}
	if (curr_count_d==cols-1){
//
console.log("curr_count=", curr_count);
	document.getElementById("path5").setAttribute('d',"");
document.getElementById("path4").setAttribute('d',cells_arr[curr_count_d][4]);
	
	document.getElementById("path3").setAttribute('d',cells_arr[curr_count_d-1][4]);
	document.getElementById("path2").setAttribute('d',cells_arr[curr_count_d-2][4]);
	document.getElementById("path1").setAttribute('d',cells_arr[curr_count_d-3][4]);
	document.getElementById("cell5_rect").style.fill = "blue";

	}	


if ((curr_count_d<(cols-1))&&(curr_count_d>2))
{
	document.getElementById("path5").setAttribute('d',cells_arr[curr_count_d+1][4]);
	document.getElementById("path4").setAttribute('d',cells_arr[curr_count_d][4]);
	document.getElementById("path3").setAttribute('d',cells_arr[curr_count_d-1][4]);
	document.getElementById("path2").setAttribute('d',cells_arr[curr_count_d-2][4]);
	document.getElementById("path1").setAttribute('d',cells_arr[curr_count_d-3][4]);

	document.getElementById("description").innerHTML=cells_arr[curr_count_d-1][1];
	document.getElementById("cell1_rect").style.fill = "lightgrey";
document.getElementById("cell2_rect").style.fill = "lightgrey";
document.getElementById("cell3_rect").style.fill = "white";
document.getElementById("cell4_rect").style.fill = "lightgrey";
document.getElementById("cell5_rect").style.fill = "lightgrey";
	
	}//if


	document.getElementById("player_rectangle").style.fill = "#566573";
	document.getElementById("row_num_left").style.fill = "black";
	document.getElementById("row_num_right").style.fill = "black";

//		console.log("curr_count_=",curr_count_);
	document.getElementById('fig1').innerHTML = ""+(curr_count_d-2);
	document.getElementById('fig2').innerHTML = ""+(curr_count_d-1);
	document.getElementById('fig3').innerHTML = ""+(curr_count_d);
	document.getElementById('fig4').innerHTML = ""+(curr_count_d+1);
	document.getElementById('fig5').innerHTML = ""+(curr_count_d+2);

	document.getElementById("fig_d1").innerHTML = ""+(curr_count_d-2);
	document.getElementById("fig_d2").innerHTML = ""+(curr_count_d-1);
	document.getElementById("fig_d3").innerHTML = ""+(curr_count_d);
	document.getElementById("fig_d4").innerHTML = ""+(curr_count_d+1);
	document.getElementById("fig_d5").innerHTML = ""+(curr_count_d+2);
	}
}
old_id=0;
curr_id=old_id;

function tableCreate(rows,cols){



    var body = document.body,
        tbl  = document.createElement('table');
    	tbl.style.width  = '20px';
   	tbl.style.height  = '20px';
    	tbl.style.border = '1px solid black';
	tbl.setAttribute('id','patternTable');
	//tbl.setAttribute('max-height','250');
	//tbl.setAttribute('overflow-x','auto');

	//tbl.style.overflow-x='auto';
	
    for(var i = 0; i < rows; i++){
        var tr = tbl.insertRow();
        for(var j = 0; j < cols; j++){
            
                var td = tr.insertCell();
		td.id=""+i+"-"+j;
		td.addEventListener("click",function(){
//alert("cell clicked "+this.cellIndex+" "+this.id);
//console.log(""+td.id)
		

			if (old_id!=0)
			{	//document.getElementById(old_id).style.background = "white";
			var ids=this.id.split("-")
			var nr=parseInt(ids[0]);
			var nc=parseInt(ids[1]);

				for (var i_ids=0; i_ids <rows;i_ids++){
					for (var j_ids=0; j_ids <cols;j_ids++){
						t_id=""+i_ids+"-"+j_ids;

						//document.getElementById(t_id).style.background = "pink";

						if (t_id!=this.id){
							document.getElementById(t_id).style.background = "white";
							
						}
						if (i_ids!=nr){
							document.getElementById(t_id).style.background = "gray";
						}
						//if ()
						
					}//for					
				}//for
				console.log("cell clicked "+this.cellIndex+" "+this.id);
				cell_id=this.id;
//				if (nr===old_id){
//
//					document.getElementById(old_id).style.background = "white";
//				}
//				else{
//					document.getElementById(old_id).style.background = "gray";
// dig here
				console.log("point 1",rows," ",cols, " ", this.id);
				console.log("point 2",knitelem_arr[rows-nr-1][cols-nc-1]);
				console.log("point 3",knitelem_arr[rows-nr-1]);
				line=knitelem_arr[rows-nr-1];
				row_count=rows-nr-1;
				
				curr_count=cols-nc;
				console.log("point 100", curr_count," ",row_count);
				if ((row_count%2)==1){
					sideRSWS='WS';
					display5("WS",cols-nc, rows-nr-1, knitelem_arr[rows-nr-1]);
				}else{
					sideRSWS='RS';
					display5("RS",cols-nc, rows-nr-1,knitelem_arr[rows-nr-1]);
		}
//
//				}//for
				document.getElementById(old_id).style.border = "1px solid black";
			//tbl.getElementsByTagName("tr")[old_row].style.background="gray"
			}//if


			document.getElementById(this.id).style.border = "2px solid red";
			document.getElementById(this.id).style.background = "yellow";
			document.getElementById(this.id).style.width = "100";
	
			old_id=this.id;

//		

});//function


//td.id.addEventListener("dblclick", function(){
//			alert("Hello! Double clicked");

//		});


		var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
		var path1 = document.createElementNS("http://www.w3.org/2000/svg",'path');


   		svg.setAttribute('width', '20');
		svg.setAttribute('height', '20');
		svg.setAttribute('stroke', 'black');
		svg.setAttribute('stroke-width', '7');
		svg.setAttribute('viewBox','0 0 100 100');
		svg.setAttribute('fill','none');

		path1.setAttribute('cx', '10');
		path1.setAttribute('cy', '10');
		d_attr=returnD(i,j);
		path1.setAttribute('d', d_attr);
   		svg.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");

    		svg.appendChild(path1);
		td.appendChild(svg);
//console.log(""+td.id);
        }//for
	var right_ruler=tr.insertCell();
		right_ruler.innerHTML=""+rows-i;
		right_ruler.style.backgroundColor = "lightgreen";
    }//for
//for the bottom ruller
	tr = tbl.insertRow();
	for(var j = 0; j < cols; j++){
                var td = tr.insertCell();
		td.style.backgroundColor = "lightgreen";
		td.innerHTML=""+cols-j;
	}
    body.appendChild(tbl);
	
var cells=this.cells;
//console.log("cells="+cells);
	
}

tableCreate(rows,cols);



</script>


<script>
//var line=[];


//var curr_count;
//var row_count;
 

</script>


</body>
</html>
